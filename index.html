<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LT Rubber Barcode - Save Tool</title>
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f4f6f8;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
            width: 350px;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 12px;
            font-size: 20px;
            text-align: center;
            margin: 15px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
        }
        input[type="text"]:focus { border-color: #007bff; outline: none; }

        .barcode-box {
            min-height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px dashed #ccc;
            padding: 10px;
            margin-bottom: 20px;
            background: #fff;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            color: white;
        }
        .btn-view { background-color: #17a2b8; } /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤ */
        .btn-view:hover { background-color: #138496; }
        
        .btn-print { background-color: #6c757d; } /* ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤ */
        .btn-print:hover { background-color: #5a6268; }

        .hint { font-size: 12px; color: #666; margin-top: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h3>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</h3>
    <input type="text" id="code" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." onkeyup="gen()" autofocus>

    <div class="barcode-box">
        <img id="bcImg" src="" style="display:none; max-width: 100%;">
        <span id="txt" style="color:#aaa;">‡∏£‡∏´‡∏±‡∏™‡∏à‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</span>
    </div>

    <button class="btn btn-view" onclick="openImage()">üîç ‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (Save As)</button>
    
    <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è ‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ</button>

    <p class="hint">
        *‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏î Save: ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏µ‡∏ü‡πâ‡∏≤ > ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ > ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Save Image As"
    </p>
</div>

<script>
    function getUrl(val) {
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î (dpi=200 ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô)
        return `https://barcode.tec-it.com/barcode.ashx?data=${encodeURIComponent(val)}&translate-esc=on&dpi=200&showhrt=no`;
    }

    function gen() {
        const val = document.getElementById('code').value;
        const img = document.getElementById('bcImg');
        const txt = document.getElementById('txt');

        if(val.trim()){
            img.src = getUrl(val);
            img.style.display = 'block';
            txt.style.display = 'none';
        } else {
            img.style.display = 'none';
            txt.style.display = 'block';
        }
    }

    function openImage() {
        const val = document.getElementById('code').value;
        if(!val.trim()) { alert("‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö"); return; }
        
        const url = getUrl(val);
        
        // ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô HTML ‡∏•‡∏á‡πÑ‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤ Save ‡∏á‡πà‡∏≤‡∏¢‡πÜ
        const win = window.open("");
        win.document.write(`
            <html>
            <head><title>Save Barcode ${val}</title></head>
            <body style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; background:#eee;">
                <h3>‡∏£‡∏´‡∏±‡∏™: ${val}</h3>
                <img src="${url}" style="border:1px solid #ccc; background:#fff; padding:20px;">
                <p style="font-family:sans-serif; color:#555;">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>"Save Image As..."</b> (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô...)</p>
            </body>
            </html>
        `);
    }
</script>

</body>
</html>
